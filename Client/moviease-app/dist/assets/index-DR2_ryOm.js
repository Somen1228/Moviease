import{r as t,d as v,u as N,s as d,j as e,S as b,I as M,f as Y,C as m,B as D}from"./index-CBNzEsnu.js";import{a as y}from"./movies-DxMXc0Ba.js";import{h as n}from"./moment-C5S46NFB.js";import{g as S}from"./shows-Cck9Ydzv.js";function T(){const[a,x]=t.useState(null),[i,h]=t.useState(n().format("YYYY-MM-DD")),[l,u]=t.useState(null),[j,r]=t.useState(!0),c=v(),o=N();t.useEffect(()=>{window.scroll(0,0)},[]),t.useEffect(()=>{g()},[]);const f=s=>{h(s.target.value),o(`/movie/${a._id}?date=${n(s.target.value).format("YYYY-MM-DD")}`)},g=async()=>{r(!0);const s=await y(c.id);s.success?x(()=>({...s.data})):d.error(s.message),r(!1)},p=async()=>{r(!0);const s=await S(c.id,i);s.success?u(()=>s.data):d.error(s.data.message),r(!1)};return t.useEffect(()=>{p()},[i]),e.jsx("div",{className:"relative p-4 md:p-8 mt-10",children:j?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(b,{size:"large"})}):e.jsxs(e.Fragment,{children:[a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 h-[100vh]",style:{backgroundImage:`url(${a.poster})`,backgroundSize:"cover",backgroundPosition:"center",opacity:.05}}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start md:gap-8 mt-10",children:[e.jsx("div",{children:e.jsx("img",{className:"rounded-lg",src:a.poster,width:150,alt:"Movie Poster"})}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4 md:mt-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-950",children:a.title}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsxs("p",{className:"movie-data",children:["Language: ",e.jsx("span",{children:a.language})]}),e.jsxs("p",{className:"movie-data",children:["Genre: ",e.jsx("span",{children:a.genre})]}),e.jsxs("p",{className:"movie-data",children:["Release Date:"," ",e.jsx("span",{children:n(a.releaseDate).format("MMM Do YYYY")})]}),e.jsxs("p",{className:"movie-data",children:["Duration: ",e.jsx("span",{children:a.duration})]})]}),e.jsx("hr",{})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-10",children:[e.jsx("label",{className:"text-xl font-semibold",children:"Choose the date:"}),e.jsx(M,{type:"date",value:i,onChange:f})]})]}),e.jsx("h2",{className:"mt-8 text-2xl font-bold",children:"Theatres"}),l&&l.length===0&&e.jsx("div",{className:"mt-4",children:e.jsx("h2",{className:"text-blue-700 text-xl font-semibold",children:"Currently, no theatres available for this movie :("})}),l&&l.length>0&&e.jsx("div",{className:"mt-4",children:l.map(s=>e.jsx("div",{className:"py-4 border-b",children:e.jsxs(Y,{className:"flex flex-wrap justify-between",children:[e.jsxs(m,{lg:7,children:[e.jsx("h3",{className:"text-lg font-medium",children:s.theatre.name}),e.jsx("p",{className:"text-blue-500",children:s.theatre.address})]}),e.jsx(m,{children:e.jsx(D,{className:"bg-indigo-700 text-white font-bold",onClick:()=>o(`/book-show/${s._id}`),children:e.jsx("h5",{children:s.time})})})]})},s._id))})]})})}export{T as default};
