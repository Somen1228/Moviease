import{a4 as Ha,Y as Fr,G as S,d as la,y as V,ao as La,ap as sa,B as Na,P as Ra,a as F,c as tr,j as Ta,b as Ea,o as Ba,aq as _a,W as Ve,ar as ca,as as va,_ as Aa}from"./index-nvT5R7Lp.js";import{r as n,f as Fa,h as Ia}from"./index-BItzXT4c.js";import{R as xa,i as ja}from"./useSize-CmQMDQbi.js";const ia=()=>({height:0,opacity:0}),ha=e=>{const{scrollHeight:a}=e;return{height:a,opacity:1}},qa=e=>({height:e?e.offsetHeight:0}),ua=(e,a)=>(a==null?void 0:a.deadline)===!0||a.propertyName==="height",Ua=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ha}-motion-collapse`,onAppearStart:ia,onEnterStart:ia,onAppearActive:ha,onEnterActive:ha,onLeaveStart:qa,onLeaveActive:ia,onAppearEnd:ua,onEnterEnd:ua,onLeaveEnd:ua,motionDeadline:500}},wt=(e,a,r)=>r!==void 0?r:`${e}-${a}`,Ct=Ua;var Wa=n.createContext(null),ma=[];function Va(e,a){var r=n.useState(function(){if(!Fr())return null;var g=document.createElement("div");return g}),t=S(r,1),o=t[0],u=n.useRef(!1),l=n.useContext(Wa),c=n.useState(ma),m=S(c,2),d=m[0],w=m[1],f=l||(u.current?void 0:function(g){w(function(P){var R=[g].concat(la(P));return R})});function C(){o.parentElement||document.body.appendChild(o),u.current=!0}function h(){var g;(g=o.parentElement)===null||g===void 0||g.removeChild(o),u.current=!1}return V(function(){return e?l?l(C):C():h(),h},[e]),V(function(){d.length&&(d.forEach(function(g){return g()}),w(ma))},[d]),[o,f]}function Qa(e){var a="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),r=document.createElement("div");r.id=a;var t=r.style;t.position="absolute",t.left="0",t.top="0",t.width="100px",t.height="100px",t.overflow="scroll";var o,u;if(e){var l=getComputedStyle(e);t.scrollbarColor=l.scrollbarColor,t.scrollbarWidth=l.scrollbarWidth;var c=getComputedStyle(e,"::-webkit-scrollbar"),m=parseInt(c.width,10),d=parseInt(c.height,10);try{var w=m?"width: ".concat(c.width,";"):"",f=d?"height: ".concat(c.height,";"):"";La(`
#`.concat(a,`::-webkit-scrollbar {
`).concat(w,`
`).concat(f,`
}`),a)}catch(g){console.error(g),o=m,u=d}}document.body.appendChild(r);var C=e&&o&&!isNaN(o)?o:r.offsetWidth-r.clientWidth,h=e&&u&&!isNaN(u)?u:r.offsetHeight-r.clientHeight;return document.body.removeChild(r),sa(a),{width:C,height:h}}function Ga(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:Qa(e)}function Ja(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Ka="rc-util-locker-".concat(Date.now()),ga=0;function Za(e){var a=!!e,r=n.useState(function(){return ga+=1,"".concat(Ka,"_").concat(ga)}),t=S(r,1),o=t[0];V(function(){if(a){var u=Ga(document.body).width,l=Ja();La(`
html body {
  overflow-y: hidden;
  `.concat(l?"width: calc(100% - ".concat(u,"px);"):"",`
}`),o)}else sa(o);return function(){sa(o)}},[a,o])}var Ya=!1;function Xa(e){return Ya}var ya=function(a){return a===!1?!1:!Fr()||!a?null:typeof a=="string"?document.querySelector(a):typeof a=="function"?a():a},za=n.forwardRef(function(e,a){var r=e.open,t=e.autoLock,o=e.getContainer;e.debug;var u=e.autoDestroy,l=u===void 0?!0:u,c=e.children,m=n.useState(r),d=S(m,2),w=d[0],f=d[1],C=w||r;n.useEffect(function(){(l||r)&&f(r)},[r,l]);var h=n.useState(function(){return ya(o)}),g=S(h,2),P=g[0],R=g[1];n.useEffect(function(){var p=ya(o);R(p??null)});var B=Va(C&&!P),E=S(B,2),M=E[0],v=E[1],_=P??M;Za(t&&r&&Fr()&&(_===M||_===document.body));var X=null;if(c&&Na(c)&&a){var O=c;X=O.ref}var ie=Ra(X,a);if(!C||!Fr()||P===void 0)return null;var de=_===!1||Xa(),Q=c;return a&&(Q=n.cloneElement(c,{ref:ie})),n.createElement(Wa.Provider,{value:v},de?Q:Fa.createPortal(Q,_))});function Oa(){var e=F({},Ia);return e.useId}var ba=0,wa=Oa();const pa=wa?function(a){var r=wa();return a||r}:function(a){var r=n.useState("ssr-id"),t=S(r,2),o=t[0],u=t[1];return n.useEffect(function(){var l=ba;ba+=1,u("rc_unique_".concat(l))},[]),a||o},et=e=>({animationDuration:e,animationFillMode:"both"}),rt=e=>({animationDuration:e,animationFillMode:"both"}),Mt=function(e,a,r,t){const u=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${u}${e}-enter,
      ${u}${e}-appear
    `]:Object.assign(Object.assign({},et(t)),{animationPlayState:"paused"}),[`${u}${e}-leave`]:Object.assign(Object.assign({},rt(t)),{animationPlayState:"paused"}),[`
      ${u}${e}-enter${e}-enter-active,
      ${u}${e}-appear${e}-appear-active
    `]:{animationName:a,animationPlayState:"running"},[`${u}${e}-leave${e}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},at=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};function tt(e){var a=e.prefixCls,r=e.align,t=e.arrow,o=e.arrowPos,u=t||{},l=u.className,c=u.content,m=o.x,d=m===void 0?0:m,w=o.y,f=w===void 0?0:w,C=n.useRef();if(!r||!r.points)return null;var h={position:"absolute"};if(r.autoArrow!==!1){var g=r.points[0],P=r.points[1],R=g[0],B=g[1],E=P[0],M=P[1];R===E||!["t","b"].includes(R)?h.top=f:R==="t"?h.top=0:h.bottom=0,B===M||!["l","r"].includes(B)?h.left=d:B==="l"?h.left=0:h.right=0}return n.createElement("div",{ref:C,className:tr("".concat(a,"-arrow"),l),style:h},c)}function nt(e){var a=e.prefixCls,r=e.open,t=e.zIndex,o=e.mask,u=e.motion;return o?n.createElement(Ta,Ea({},u,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(l){var c=l.className;return n.createElement("div",{style:{zIndex:t},className:tr("".concat(a,"-mask"),c)})}):null}var ot=n.memo(function(e){var a=e.children;return a},function(e,a){return a.cache}),it=n.forwardRef(function(e,a){var r=e.popup,t=e.className,o=e.prefixCls,u=e.style,l=e.target,c=e.onVisibleChanged,m=e.open,d=e.keepDom,w=e.fresh,f=e.onClick,C=e.mask,h=e.arrow,g=e.arrowPos,P=e.align,R=e.motion,B=e.maskMotion,E=e.forceRender,M=e.getPopupContainer,v=e.autoDestroy,_=e.portal,X=e.zIndex,O=e.onMouseEnter,ie=e.onMouseLeave,de=e.onPointerEnter,Q=e.ready,p=e.offsetX,fe=e.offsetY,he=e.offsetR,ue=e.offsetB,me=e.onAlign,x=e.onPrepare,z=e.stretch,y=e.targetWidth,G=e.targetHeight,k=typeof r=="function"?r():r,le=m||d,ee=(M==null?void 0:M.length)>0,nr=n.useState(!M||!ee),Qe=S(nr,2),ge=Qe[0],Ge=Qe[1];if(V(function(){!ge&&ee&&l&&Ge(!0)},[ge,ee,l]),!ge)return null;var re="auto",H={left:"-1000vw",top:"-1000vh",right:re,bottom:re};if(Q||!m){var J,se=P.points,ce=P.dynamicInset||((J=P._experimental)===null||J===void 0?void 0:J.dynamicInset),Je=ce&&se[0][1]==="r",or=ce&&se[0][0]==="b";Je?(H.right=he,H.left=re):(H.left=p,H.right=re),or?(H.bottom=ue,H.top=re):(H.top=fe,H.bottom=re)}var A={};return z&&(z.includes("height")&&G?A.height=G:z.includes("minHeight")&&G&&(A.minHeight=G),z.includes("width")&&y?A.width=y:z.includes("minWidth")&&y&&(A.minWidth=y)),m||(A.pointerEvents="none"),n.createElement(_,{open:E||le,getContainer:M&&function(){return M(l)},autoDestroy:v},n.createElement(nt,{prefixCls:o,open:m,zIndex:X,mask:C,motion:B}),n.createElement(xa,{onResize:me,disabled:!m},function(Ke){return n.createElement(Ta,Ea({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:E,leavedClassName:"".concat(o,"-hidden")},R,{onAppearPrepare:x,onEnterPrepare:x,visible:m,onVisibleChanged:function(q){var ye;R==null||(ye=R.onVisibleChanged)===null||ye===void 0||ye.call(R,q),c(q)}}),function(ke,q){var ye=ke.className,b=ke.style,xe=tr(o,ye,t);return n.createElement("div",{ref:Ba(Ke,a,q),className:xe,style:F(F(F(F({"--arrow-x":"".concat(g.x||0,"px"),"--arrow-y":"".concat(g.y||0,"px")},H),A),b),{},{boxSizing:"border-box",zIndex:X},u),onMouseEnter:O,onMouseLeave:ie,onPointerEnter:de,onClick:f},h&&n.createElement(tt,{prefixCls:o,arrow:h,arrowPos:g,align:P}),n.createElement(ot,{cache:!m&&!w},k))})}))}),ut=n.forwardRef(function(e,a){var r=e.children,t=e.getTriggerDOMNode,o=Na(r),u=n.useCallback(function(c){_a(a,t?t(c):c)},[t]),l=Ra(u,r.ref);return o?n.cloneElement(r,{ref:l}):r}),Ca=n.createContext(null);function Ma(e){return e?Array.isArray(e)?e:[e]:[]}function lt(e,a,r,t){return n.useMemo(function(){var o=Ma(r??a),u=Ma(t??a),l=new Set(o),c=new Set(u);return e&&(l.has("hover")&&(l.delete("hover"),l.add("click")),c.has("hover")&&(c.delete("hover"),c.add("click"))),[l,c]},[e,a,r,t])}function st(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===a[0]:e[0]===a[0]&&e[1]===a[1]}function ct(e,a,r,t){for(var o=r.points,u=Object.keys(e),l=0;l<u.length;l+=1){var c,m=u[l];if(st((c=e[m])===null||c===void 0?void 0:c.points,o,t))return"".concat(a,"-placement-").concat(m)}return""}function Sa(e,a,r,t){return a||(r?{motionName:"".concat(e,"-").concat(r)}:t?{motionName:t}:null)}function wr(e){return e.ownerDocument.defaultView}function da(e){for(var a=[],r=e==null?void 0:e.parentElement,t=["hidden","scroll","clip","auto"];r;){var o=wr(r).getComputedStyle(r),u=o.overflowX,l=o.overflowY,c=o.overflow;[u,l,c].some(function(m){return t.includes(m)})&&a.push(r),r=r.parentElement}return a}function br(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?a:e}function yr(e){return br(parseFloat(e),0)}function Pa(e,a){var r=F({},e);return(a||[]).forEach(function(t){if(!(t instanceof HTMLBodyElement||t instanceof HTMLHtmlElement)){var o=wr(t).getComputedStyle(t),u=o.overflow,l=o.overflowClipMargin,c=o.borderTopWidth,m=o.borderBottomWidth,d=o.borderLeftWidth,w=o.borderRightWidth,f=t.getBoundingClientRect(),C=t.offsetHeight,h=t.clientHeight,g=t.offsetWidth,P=t.clientWidth,R=yr(c),B=yr(m),E=yr(d),M=yr(w),v=br(Math.round(f.width/g*1e3)/1e3),_=br(Math.round(f.height/C*1e3)/1e3),X=(g-P-E-M)*v,O=(C-h-R-B)*_,ie=R*_,de=B*_,Q=E*v,p=M*v,fe=0,he=0;if(u==="clip"){var ue=yr(l);fe=ue*v,he=ue*_}var me=f.x+Q-fe,x=f.y+ie-he,z=me+f.width+2*fe-Q-p-X,y=x+f.height+2*he-ie-de-O;r.left=Math.max(r.left,me),r.top=Math.max(r.top,x),r.right=Math.min(r.right,z),r.bottom=Math.min(r.bottom,y)}}),r}function ka(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(a),t=r.match(/^(.*)\%$/);return t?e*(parseFloat(t[1])/100):parseFloat(r)}function $a(e,a){var r=a||[],t=S(r,2),o=t[0],u=t[1];return[ka(e.width,o),ka(e.height,u)]}function Da(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function ar(e,a){var r=a[0],t=a[1],o,u;return r==="t"?u=e.y:r==="b"?u=e.y+e.height:u=e.y+e.height/2,t==="l"?o=e.x:t==="r"?o=e.x+e.width:o=e.x+e.width/2,{x:o,y:u}}function Ee(e,a){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(t,o){return o===a?r[t]||"c":t}).join("")}function vt(e,a,r,t,o,u,l){var c=n.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[t]||{}}),m=S(c,2),d=m[0],w=m[1],f=n.useRef(0),C=n.useMemo(function(){return a?da(a):[]},[a]),h=n.useRef({}),g=function(){h.current={}};e||g();var P=Ve(function(){if(a&&r&&e){let Y=function(Pe,Ue){var er=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xe,rr=k.x+Pe,mr=k.y+Ue,gr=rr+J,Br=mr+H,ra=Math.max(rr,er.left),aa=Math.max(mr,er.top),ta=Math.min(gr,er.right),na=Math.min(Br,er.bottom);return Math.max(0,(ta-ra)*(na-aa))},Hr=function(){Be=k.y+$,_e=Be+H,Ce=k.x+D,Ae=Ce+J};var E,M,v=a,_=v.ownerDocument,X=wr(v),O=X.getComputedStyle(v),ie=O.width,de=O.height,Q=O.position,p=v.style.left,fe=v.style.top,he=v.style.right,ue=v.style.bottom,me=v.style.overflow,x=F(F({},o[t]),u),z=_.createElement("div");(E=v.parentElement)===null||E===void 0||E.appendChild(z),z.style.left="".concat(v.offsetLeft,"px"),z.style.top="".concat(v.offsetTop,"px"),z.style.position=Q,z.style.height="".concat(v.offsetHeight,"px"),z.style.width="".concat(v.offsetWidth,"px"),v.style.left="0",v.style.top="0",v.style.right="auto",v.style.bottom="auto",v.style.overflow="hidden";var y;if(Array.isArray(r))y={x:r[0],y:r[1],width:0,height:0};else{var G=r.getBoundingClientRect();y={x:G.x,y:G.y,width:G.width,height:G.height}}var k=v.getBoundingClientRect(),le=_.documentElement,ee=le.clientWidth,nr=le.clientHeight,Qe=le.scrollWidth,ge=le.scrollHeight,Ge=le.scrollTop,re=le.scrollLeft,H=k.height,J=k.width,se=y.height,ce=y.width,Je={left:0,top:0,right:ee,bottom:nr},or={left:-re,top:-Ge,right:Qe-re,bottom:ge-Ge},A=x.htmlRegion,Ke="visible",ke="visibleFirst";A!=="scroll"&&A!==ke&&(A=Ke);var q=A===ke,ye=Pa(or,C),b=Pa(Je,C),xe=A===Ke?b:ye,K=q?b:xe;v.style.left="auto",v.style.top="auto",v.style.right="0",v.style.bottom="0";var Cr=v.getBoundingClientRect();v.style.left=p,v.style.top=fe,v.style.right=he,v.style.bottom=ue,v.style.overflow=me,(M=v.parentElement)===null||M===void 0||M.removeChild(z);var $e=br(Math.round(J/parseFloat(ie)*1e3)/1e3),De=br(Math.round(H/parseFloat(de)*1e3)/1e3);if($e===0||De===0||ca(r)&&!ja(r))return;var Mr=x.offset,I=x.targetOffset,Ir=$a(k,Mr),ir=S(Ir,2),ae=ir[0],te=ir[1],Sr=$a(y,I),ne=S(Sr,2),jr=ne[0],Pr=ne[1];y.x-=jr,y.y-=Pr;var qr=x.points||[],We=S(qr,2),Z=We[0],Le=We[1],be=Da(Le),U=Da(Z),kr=ar(y,be),$r=ar(k,U),we=F({},x),D=kr.x-$r.x+ae,$=kr.y-$r.y+te,T=Y(D,$),Ze=Y(D,$,b),Ne=ar(y,["t","l"]),ze=ar(k,["t","l"]),ur=ar(y,["b","r"]),lr=ar(k,["b","r"]),He=x.overflow||{},oe=He.adjustX,Ur=He.adjustY,sr=He.shiftX,Ye=He.shiftY,cr=function(Ue){return typeof Ue=="boolean"?Ue:Ue>=0},Be,_e,Ce,Ae;Hr();var Dr=cr(Ur),vr=U[0]===be[0];if(Dr&&U[0]==="t"&&(_e>K.bottom||h.current.bt)){var Re=$;vr?Re-=H-se:Re=Ne.y-lr.y-te;var Lr=Y(D,Re),Xe=Y(D,Re,b);Lr>T||Lr===T&&(!q||Xe>=Ze)?(h.current.bt=!0,$=Re,te=-te,we.points=[Ee(U,0),Ee(be,0)]):h.current.bt=!1}if(Dr&&U[0]==="b"&&(Be<K.top||h.current.tb)){var Fe=$;vr?Fe+=H-se:Fe=ur.y-ze.y-te;var j=Y(D,Fe),Vr=Y(D,Fe,b);j>T||j===T&&(!q||Vr>=Ze)?(h.current.tb=!0,$=Fe,te=-te,we.points=[Ee(U,0),Ee(be,0)]):h.current.tb=!1}var Nr=cr(oe),Rr=U[1]===be[1];if(Nr&&U[1]==="l"&&(Ae>K.right||h.current.rl)){var Ie=D;Rr?Ie-=J-ce:Ie=Ne.x-lr.x-ae;var Tr=Y(Ie,$),Qr=Y(Ie,$,b);Tr>T||Tr===T&&(!q||Qr>=Ze)?(h.current.rl=!0,D=Ie,ae=-ae,we.points=[Ee(U,1),Ee(be,1)]):h.current.rl=!1}if(Nr&&U[1]==="r"&&(Ce<K.left||h.current.lr)){var je=D;Rr?je+=J-ce:je=ur.x-ze.x-ae;var Er=Y(je,$),Gr=Y(je,$,b);Er>T||Er===T&&(!q||Gr>=Ze)?(h.current.lr=!0,D=je,ae=-ae,we.points=[Ee(U,1),Ee(be,1)]):h.current.lr=!1}Hr();var ve=sr===!0?0:sr;typeof ve=="number"&&(Ce<b.left&&(D-=Ce-b.left-ae,y.x+ce<b.left+ve&&(D+=y.x-b.left+ce-ve)),Ae>b.right&&(D-=Ae-b.right-ae,y.x>b.right-ve&&(D+=y.x-b.right+ve)));var Me=Ye===!0?0:Ye;typeof Me=="number"&&(Be<b.top&&($-=Be-b.top-te,y.y+se<b.top+Me&&($+=y.y-b.top+se-Me)),_e>b.bottom&&($-=_e-b.bottom-te,y.y>b.bottom-Me&&($+=y.y-b.bottom+Me)));var dr=k.x+D,xr=dr+J,Te=k.y+$,qe=Te+H,fr=y.x,Oe=fr+ce,Se=y.y,Jr=Se+se,Kr=Math.max(dr,fr),Zr=Math.min(xr,Oe),Wr=(Kr+Zr)/2,Yr=Wr-dr,Xr=Math.max(Te,Se),Or=Math.min(qe,Jr),zr=(Xr+Or)/2,pr=zr-Te;l==null||l(a,we);var hr=Cr.right-k.x-(D+k.width),pe=Cr.bottom-k.y-($+k.height);$e===1&&(D=Math.round(D),hr=Math.round(hr)),De===1&&($=Math.round($),pe=Math.round(pe));var ea={ready:!0,offsetX:D/$e,offsetY:$/De,offsetR:hr/$e,offsetB:pe/De,arrowX:Yr/$e,arrowY:pr/De,scaleX:$e,scaleY:De,align:we};w(ea)}}),R=function(){f.current+=1;var M=f.current;Promise.resolve().then(function(){f.current===M&&P()})},B=function(){w(function(M){return F(F({},M),{},{ready:!1})})};return V(B,[t]),V(function(){e||B()},[e]),[d.ready,d.offsetX,d.offsetY,d.offsetR,d.offsetB,d.arrowX,d.arrowY,d.scaleX,d.scaleY,d.align,R]}function dt(e,a,r,t,o){V(function(){if(e&&a&&r){let f=function(){t(),o()};var u=a,l=r,c=da(u),m=da(l),d=wr(l),w=new Set([d].concat(la(c),la(m)));return w.forEach(function(C){C.addEventListener("scroll",f,{passive:!0})}),d.addEventListener("resize",f,{passive:!0}),t(),function(){w.forEach(function(C){C.removeEventListener("scroll",f),d.removeEventListener("resize",f)})}}},[e,a,r])}function ft(e,a,r,t,o,u,l,c){var m=n.useRef(e);m.current=e,n.useEffect(function(){if(a&&t&&(!o||u)){var d=function(h){var g=h.target;m.current&&!l(g)&&c(!1)},w=wr(t);w.addEventListener("mousedown",d,!0),w.addEventListener("contextmenu",d,!0);var f=va(r);return f&&(f.addEventListener("mousedown",d,!0),f.addEventListener("contextmenu",d,!0)),function(){w.removeEventListener("mousedown",d,!0),w.removeEventListener("contextmenu",d,!0),f&&(f.removeEventListener("mousedown",d,!0),f.removeEventListener("contextmenu",d,!0))}}},[a,r,t,o,u])}var ht=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function mt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:za,a=n.forwardRef(function(r,t){var o=r.prefixCls,u=o===void 0?"rc-trigger-popup":o,l=r.children,c=r.action,m=c===void 0?"hover":c,d=r.showAction,w=r.hideAction,f=r.popupVisible,C=r.defaultPopupVisible,h=r.onPopupVisibleChange,g=r.afterPopupVisibleChange,P=r.mouseEnterDelay,R=r.mouseLeaveDelay,B=R===void 0?.1:R,E=r.focusDelay,M=r.blurDelay,v=r.mask,_=r.maskClosable,X=_===void 0?!0:_,O=r.getPopupContainer,ie=r.forceRender,de=r.autoDestroy,Q=r.destroyPopupOnHide,p=r.popup,fe=r.popupClassName,he=r.popupStyle,ue=r.popupPlacement,me=r.builtinPlacements,x=me===void 0?{}:me,z=r.popupAlign,y=r.zIndex,G=r.stretch,k=r.getPopupClassNameFromAlign,le=r.fresh,ee=r.alignPoint,nr=r.onPopupClick,Qe=r.onPopupAlign,ge=r.arrow,Ge=r.popupMotion,re=r.maskMotion,H=r.popupTransitionName,J=r.popupAnimation,se=r.maskTransitionName,ce=r.maskAnimation,Je=r.className,or=r.getTriggerDOMNode,A=Aa(r,ht),Ke=de||Q||!1,ke=n.useState(!1),q=S(ke,2),ye=q[0],b=q[1];V(function(){b(at())},[]);var xe=n.useRef({}),K=n.useContext(Ca),Cr=n.useMemo(function(){return{registerSubPopup:function(s,L){xe.current[s]=L,K==null||K.registerSubPopup(s,L)}}},[K]),$e=pa(),De=n.useState(null),Mr=S(De,2),I=Mr[0],Ir=Mr[1],ir=n.useRef(null),ae=Ve(function(i){ir.current=i,ca(i)&&I!==i&&Ir(i),K==null||K.registerSubPopup($e,i)}),te=n.useState(null),Sr=S(te,2),ne=Sr[0],jr=Sr[1],Pr=n.useRef(null),qr=Ve(function(i){ca(i)&&ne!==i&&(jr(i),Pr.current=i)}),We=n.Children.only(l),Z=(We==null?void 0:We.props)||{},Le={},be=Ve(function(i){var s,L,W=ne;return(W==null?void 0:W.contains(i))||((s=va(W))===null||s===void 0?void 0:s.host)===i||i===W||(I==null?void 0:I.contains(i))||((L=va(I))===null||L===void 0?void 0:L.host)===i||i===I||Object.values(xe.current).some(function(N){return(N==null?void 0:N.contains(i))||i===N})}),U=Sa(u,Ge,J,H),kr=Sa(u,re,ce,se),$r=n.useState(C||!1),we=S($r,2),D=we[0],$=we[1],T=f??D,Ze=Ve(function(i){f===void 0&&$(i)});V(function(){$(f||!1)},[f]);var Ne=n.useRef(T);Ne.current=T;var ze=n.useRef([]);ze.current=[];var ur=Ve(function(i){var s;Ze(i),((s=ze.current[ze.current.length-1])!==null&&s!==void 0?s:T)!==i&&(ze.current.push(i),h==null||h(i))}),lr=n.useRef(),He=function(){clearTimeout(lr.current)},oe=function(s){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;He(),L===0?ur(s):lr.current=setTimeout(function(){ur(s)},L*1e3)};n.useEffect(function(){return He},[]);var Ur=n.useState(!1),sr=S(Ur,2),Ye=sr[0],cr=sr[1];V(function(i){(!i||T)&&cr(!0)},[T]);var Be=n.useState(null),_e=S(Be,2),Ce=_e[0],Ae=_e[1],Dr=n.useState([0,0]),vr=S(Dr,2),Re=vr[0],Lr=vr[1],Xe=function(s){Lr([s.clientX,s.clientY])},Fe=vt(T,I,ee?Re:ne,ue,x,z,Qe),j=S(Fe,11),Vr=j[0],Nr=j[1],Rr=j[2],Ie=j[3],Tr=j[4],Qr=j[5],je=j[6],Er=j[7],Gr=j[8],ve=j[9],Me=j[10],dr=lt(ye,m,d,w),xr=S(dr,2),Te=xr[0],qe=xr[1],fr=Te.has("click"),Oe=qe.has("click")||qe.has("contextMenu"),Se=Ve(function(){Ye||Me()}),Jr=function(){Ne.current&&ee&&Oe&&oe(!1)};dt(T,ne,I,Se,Jr),V(function(){Se()},[Re,ue]),V(function(){T&&!(x!=null&&x[ue])&&Se()},[JSON.stringify(z)]);var Kr=n.useMemo(function(){var i=ct(x,u,ve,ee);return tr(i,k==null?void 0:k(ve))},[ve,k,x,u,ee]);n.useImperativeHandle(t,function(){return{nativeElement:Pr.current,popupElement:ir.current,forceAlign:Se}});var Zr=n.useState(0),Wr=S(Zr,2),Yr=Wr[0],Xr=Wr[1],Or=n.useState(0),zr=S(Or,2),pr=zr[0],hr=zr[1],pe=function(){if(G&&ne){var s=ne.getBoundingClientRect();Xr(s.width),hr(s.height)}},ea=function(){pe(),Se()},Y=function(s){cr(!1),Me(),g==null||g(s)},Hr=function(){return new Promise(function(s){pe(),Ae(function(){return s})})};V(function(){Ce&&(Me(),Ce(),Ae(null))},[Ce]);function Pe(i,s,L,W){Le[i]=function(N){var _r;W==null||W(N),oe(s,L);for(var oa=arguments.length,fa=new Array(oa>1?oa-1:0),Ar=1;Ar<oa;Ar++)fa[Ar-1]=arguments[Ar];(_r=Z[i])===null||_r===void 0||_r.call.apply(_r,[Z,N].concat(fa))}}(fr||Oe)&&(Le.onClick=function(i){var s;Ne.current&&Oe?oe(!1):!Ne.current&&fr&&(Xe(i),oe(!0));for(var L=arguments.length,W=new Array(L>1?L-1:0),N=1;N<L;N++)W[N-1]=arguments[N];(s=Z.onClick)===null||s===void 0||s.call.apply(s,[Z,i].concat(W))}),ft(T,Oe,ne,I,v,X,be,oe);var Ue=Te.has("hover"),er=qe.has("hover"),rr,mr;Ue&&(Pe("onMouseEnter",!0,P,function(i){Xe(i)}),Pe("onPointerEnter",!0,P,function(i){Xe(i)}),rr=function(s){(T||Ye)&&I!==null&&I!==void 0&&I.contains(s.target)&&oe(!0,P)},ee&&(Le.onMouseMove=function(i){var s;(s=Z.onMouseMove)===null||s===void 0||s.call(Z,i)})),er&&(Pe("onMouseLeave",!1,B),Pe("onPointerLeave",!1,B),mr=function(){oe(!1,B)}),Te.has("focus")&&Pe("onFocus",!0,E),qe.has("focus")&&Pe("onBlur",!1,M),Te.has("contextMenu")&&(Le.onContextMenu=function(i){var s;Ne.current&&qe.has("contextMenu")?oe(!1):(Xe(i),oe(!0)),i.preventDefault();for(var L=arguments.length,W=new Array(L>1?L-1:0),N=1;N<L;N++)W[N-1]=arguments[N];(s=Z.onContextMenu)===null||s===void 0||s.call.apply(s,[Z,i].concat(W))}),Je&&(Le.className=tr(Z.className,Je));var gr=F(F({},Z),Le),Br={},ra=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];ra.forEach(function(i){A[i]&&(Br[i]=function(){for(var s,L=arguments.length,W=new Array(L),N=0;N<L;N++)W[N]=arguments[N];(s=gr[i])===null||s===void 0||s.call.apply(s,[gr].concat(W)),A[i].apply(A,W)})});var aa=n.cloneElement(We,F(F({},gr),Br)),ta={x:Qr,y:je},na=ge?F({},ge!==!0?ge:{}):null;return n.createElement(n.Fragment,null,n.createElement(xa,{disabled:!T,ref:qr,onResize:ea},n.createElement(ut,{getTriggerDOMNode:or},aa)),n.createElement(Ca.Provider,{value:Cr},n.createElement(it,{portal:e,ref:ae,prefixCls:u,popup:p,className:tr(fe,Kr),style:he,target:ne,onMouseEnter:rr,onMouseLeave:mr,onPointerEnter:rr,zIndex:y,open:T,keepDom:Ye,fresh:le,onClick:nr,mask:v,motion:U,maskMotion:kr,onVisibleChanged:Y,onPrepare:Hr,forceRender:ie,autoDestroy:Ke,getPopupContainer:O,align:ve,arrow:na,arrowPos:ta,ready:Vr,offsetX:Nr,offsetY:Rr,offsetR:Ie,offsetB:Tr,onAlign:Se,stretch:G,targetWidth:Yr/Er,targetHeight:pr/Gr})))});return a}const St=mt(za);export{St as T,Ct as a,at as b,wt as g,Mt as i};
