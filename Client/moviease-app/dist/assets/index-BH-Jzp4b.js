import{r as c,j as e,S,I as v,s as D}from"./index-8bvBX-Cq.js";import{b}from"./shows-CMJ7nkY4.js";import{h as A}from"./moment-C5S46NFB.js";import{S as d}from"./index-Cpbl78VH.js";import{C as m}from"./index-BvO8v6rO.js";const{Meta:y}=m,{Search:k}=v,{Option:o}=d;function Y({userDetails:w}){const[i,x]=c.useState([]),[u,p]=c.useState([]),[l,j]=c.useState(""),[n,f]=c.useState("showNameAsc"),[g,h]=c.useState(!0);c.useEffect(()=>{(async()=>{await N()})()},[]),c.useEffect(()=>{(()=>{let t=i;switch(l&&(t=t.filter(a=>a.show.name.toLowerCase().includes(l.toLowerCase()))),n){case"showNameAsc":t=t.sort((a,r)=>a.show.name.localeCompare(r.show.name));break;case"showNameDesc":t=t.sort((a,r)=>r.show.name.localeCompare(a.show.name));break;case"dateAsc":t=t.sort((a,r)=>new Date(a.show.date)-new Date(r.show.date));break;case"dateDesc":t=t.sort((a,r)=>new Date(r.show.date)-new Date(a.show.date));break;case"priceDesc":t=t.sort((a,r)=>a.show.ticketPrice*a.seats.length-r.show.ticketPrice*r.seats.length);break;case"priceAsc":t=t.sort((a,r)=>r.show.ticketPrice*r.seats.length-a.show.ticketPrice*a.seats.length);break}p(t)})()},[l,i,n]);const N=async()=>{h(!0);const s=await b({userDetails:w});s.success?x(s.data):D.error(s.message),h(!1)};return e.jsxs("div",{className:"container mt-32 mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Booked Shows"}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(k,{placeholder:"Search by show name",onChange:s=>j(s.target.value),value:l,enterButton:!0,className:"w-full md:w-1/2 lg:w-1/3"}),e.jsxs(d,{defaultValue:"showNameAsc",onChange:s=>f(s),className:"w-full md:w-1/4 lg:w-1/5 ml-4",style:{width:200},children:[e.jsx(o,{value:"showNameAsc",children:"Name (A-Z)"}),e.jsx(o,{value:"showNameDesc",children:"Name (Z-A)"}),e.jsx(o,{value:"dateAsc",children:"Date (Old to New)"}),e.jsx(o,{value:"dateDesc",children:"Date (New to Old)"}),e.jsx(o,{value:"priceAsc",children:"Price (Low to High)"}),e.jsx(o,{value:"priceDesc",children:"Price (High to Low)"})]})]}),g?e.jsx("div",{className:"flex justify-center h-screen",children:e.jsx(S,{size:"large"})}):i.length===0?e.jsx("div",{className:"flex justify-center items-top h-screen text-2xl font-bold text-blue-600 bg-gray-100 border border-gray-300 rounded-lg p-6 shadow-md",children:"You haven't booked any shows :("}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:u.map(s=>e.jsx(m,{className:"w-full",cover:e.jsx("img",{alt:s.show.movie.title,src:s.show.movie.poster,className:"h-48 w-full object-cover rounded-t-lg"}),children:e.jsx(y,{title:s.show.name,description:e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Theatre:"})," ",s.show.theatre.name]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Date:"})," ",A(s.show.date).format("YYYY-MM-DD")]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Time:"})," ",s.show.time]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Seats:"})," ",s.seats.join(", ")]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Price:"})," Rs."," ",s.show.ticketPrice*s.seats.length," /-"]})]})})},s._id))})]})}export{Y as default};
